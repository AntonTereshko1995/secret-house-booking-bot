name: "–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã —Å —É—á–µ—Ç–æ–º –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã—Ö –¥–Ω–µ–π"
description: |

## –¶–µ–ª—å
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–º–∞ —Å —É—á–µ—Ç–æ–º –æ–±—ã—á–Ω—ã—Ö –∏ –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã—Ö –¥–Ω–µ–π:
- **–û–±—ã—á–Ω—ã–µ –¥–Ω–∏**: –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ 50% –æ—Ç –æ–±—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–µ –¥–Ω–∏**: –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ 100% –æ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

## –ü–æ—á–µ–º—É
- **–ë–∏–∑–Ω–µ—Å-—Ü–µ–Ω–Ω–æ—Å—Ç—å**: –°–Ω–∏–∂–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ä–∏—Å–∫–æ–≤ –Ω–∞ –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–µ –¥–∞—Ç—ã (–≤—ã—Å–æ–∫–∏–π —Å–ø—Ä–æ—Å)
- **–ì–∏–±–∫–æ—Å—Ç—å**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å**: –ö–ª–∏–µ–Ω—Ç —Å—Ä–∞–∑—É –≤–∏–¥–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—É–º–º—É –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã –ø—Ä–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É date-based –ø—Ä–∞–≤–∏–ª

## –ß—Ç–æ
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã, –∫–æ—Ç–æ—Ä–∞—è:
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –ø–æ–ø–∞–¥–∞–µ—Ç –ª–∏ –¥–∞—Ç–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å
2. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É –∫–∞–∫ 50% –∏–ª–∏ 100% –æ—Ç –æ–±—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏
3. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—É–º–º—É –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –±–æ—Ç–∞
4. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—É—é —Å—É–º–º—É –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞
- [ ] –ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ 50% –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –¥–Ω–µ–π
- [ ] –ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ 100% –¥–ª—è –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã—Ö –¥–Ω–µ–π
- [ ] –°–ø–∏—Å–æ–∫ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
- [ ] –°–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—É–º–º—É –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—É—é –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É
- [ ] –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –≤—Ä—É—á–Ω—É—é –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- [ ] –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ

## –í–µ—Å—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Å—Å—ã–ª–∫–∏
```yaml
# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ö –ü–†–û–ß–¢–ï–ù–ò–Æ - –í–∫–ª—é—á–∏—Ç–µ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç

- file: src/services/date_pricing_service.py
  why: –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è date-based –ø—Ä–∞–≤–∏–ª - –Ω—É–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
  pattern: Singleton service —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –ø—Ä–∞–≤–∏–ª –∏–∑ JSON

- file: src/models/date_pricing_rule.py
  why: –ú–æ–¥–µ–ª—å –¥–ª—è date-based –ø—Ä–∞–≤–∏–ª - —Å–æ–∑–¥–∞–¥–∏–º –∞–Ω–∞–ª–æ–≥–∏—á–Ω—É—é –¥–ª—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã
  pattern: Dataclass —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π, –º–µ—Ç–æ–¥—ã applies_to_date()

- file: src/services/file_service.py
  why: –°–µ—Ä–≤–∏—Å –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –∏–∑ JSON - –¥–æ–±–∞–≤–∏–º –º–µ—Ç–æ–¥ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∞–≤–∏–ª –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã
  pattern: Singleton —Å –º–µ—Ç–æ–¥–∞–º–∏ get_*_rules()

- file: src/config/date_pricing_rules.json
  why: –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ - —Å–æ–∑–¥–∞–¥–∏–º –ø–æ—Ö–æ–∂–∏–π –¥–ª—è –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
  structure: JSON —Å –º–∞—Å—Å–∏–≤–æ–º –ø—Ä–∞–≤–∏–ª

- file: db/models/booking.py
  why: –ú–æ–¥–µ–ª—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å –ø–æ–ª–µ–º prepayment_price (—Å—Ç—Ä–æ–∫–∞ 35-37)
  critical: –ü–æ–ª–µ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ

- file: src/handlers/booking_handler.py
  why: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –≥–¥–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ (—Å—Ç—Ä–æ–∫–∞ 1011)
  critical: –ó–∞–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É PREPAYMENT –Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç

- file: src/config/config.py
  why: –°–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É PREPAYMENT = 80 (—Å—Ç—Ä–æ–∫–∞ 13)
  note: –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –∫–∞–∫ fallback, –Ω–æ –Ω–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–∞–ø—Ä—è–º—É—é

- file: src/services/database/booking_repository.py
  why: –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏ (—Å—Ç—Ä–æ–∫–∏ 470-474)
  pattern: –ú–µ—Ç–æ–¥ update_booking —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º prepayment_price

- url: https://docs.python.org/3/library/datetime.html
  why: –†–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
  section: datetime.date, date ranges

- url: https://python-telegram-bot.readthedocs.io/
  why: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ python-telegram-bot –¥–ª—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
  critical: Async/await patterns –≤ handlers
```

### –¢–µ–∫—É—â–µ–µ –¥–µ—Ä–µ–≤–æ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã
```bash
secret-house-booking-bot/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py                          # PREPAYMENT = 80 –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ date_pricing_rules.json            # –ü—Ä–∏–º–µ—Ä date-based –ø—Ä–∞–≤–∏–ª
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tariff_rate.json                   # –¢–∞—Ä–∏—Ñ—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ .env.debug                         # Environment –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ booking_handler.py                 # MODIFY: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin_handler.py                   # –ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ booking_details_handler.py         # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ date_pricing_rule.py               # REFERENCE: –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ booking_draft.py                   # Draft –º–æ–¥–µ–ª—å –¥–ª—è Redis
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ date_pricing_service.py            # REFERENCE: –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calculation_rate_service.py        # –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ file_service.py                    # MODIFY: –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∞–≤–∏–ª
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database_service.py                # –§–∞—Å–∞–¥ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ booking_repository.py          # CRUD –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ helpers/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ string_helper.py                   # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ main.py                                # Entry point
‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îî‚îÄ‚îÄ models/
‚îÇ       ‚îî‚îÄ‚îÄ booking.py                         # –ú–æ–¥–µ–ª—å BookingBase —Å prepayment_price
‚îú‚îÄ‚îÄ alembic/                                   # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îú‚îÄ‚îÄ tests/                                     # –¢–µ—Å—Ç—ã (–ø—É—Å—Ç–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è)
‚îú‚îÄ‚îÄ requirements.txt                           # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îî‚îÄ‚îÄ PRPs/                                      # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è PRP

```

### –ñ–µ–ª–∞–µ–º–æ–µ –¥–µ—Ä–µ–≤–æ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã —Å –Ω–æ–≤—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
```bash
secret-house-booking-bot/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ holiday_prepayment_rules.json      # NEW: –ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã –¥–ª—è –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ holiday_prepayment_rule.py         # NEW: –ú–æ–¥–µ–ª—å –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ services/
‚îÇ       ‚îî‚îÄ‚îÄ prepayment_service.py              # NEW: –°–µ—Ä–≤–∏—Å —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã
```

### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫
```python
# –ö–†–ò–¢–ò–ß–ù–û: Python-telegram-bot —Ç—Ä–µ–±—É–µ—Ç async/await –≤–æ –≤—Å–µ—Ö handlers
# –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å async

# –ö–†–ò–¢–ò–ß–ù–û: Singleton decorator –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤
# from singleton_decorator import singleton
# @singleton –ø–µ—Ä–µ–¥ –∫–ª–∞—Å—Å–æ–º

# –ö–†–ò–¢–ò–ß–ù–û: SQLAlchemy ORM —Å Mapped —Ç–∏–ø–∞–º–∏
# –ú–æ–¥–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç Mapped[type] = mapped_column(...)

# –ö–†–ò–¢–ò–ß–ù–û: dataclasses_json –¥–ª—è JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
# @dataclass_json –∏ @dataclass –¥–ª—è –º–æ–¥–µ–ª–µ–π

# –ö–†–ò–¢–ò–ß–ù–û: Redis –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è draft –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
# –§–∏–Ω–∞–ª—å–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ SQLite —á–µ—Ä–µ–∑ BookingBase

# –ö–†–ò–¢–ò–ß–ù–û: CalculationRateService —É–∂–µ —Å—á–∏—Ç–∞–µ—Ç –ø–æ–ª–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
# –ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å % –æ—Ç —ç—Ç–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏

# –í–ê–ñ–ù–û: DatePricingService –∏—Å–ø–æ–ª—å–∑—É–µ—Ç applies_to_date(target_date: date)
# –°–∫–æ–ø–∏—Ä—É–µ–º —ç—Ç–æ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è HolidayPrepaymentService

# –í–ê–ñ–ù–û: FileService –∑–∞–≥—Ä—É–∂–∞–µ—Ç JSON —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ Pydantic/dataclasses
# –°–ª–µ–¥—É–µ–º —ç—Ç–æ–º—É –ø–∞—Ç—Ç–µ—Ä–Ω—É

# –í–ê–ñ–ù–û: –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ PREPAYMENT = 80 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ fallback
# –ù–µ —É–¥–∞–ª—è–µ–º –µ—ë, –Ω–æ –ø–µ—Ä–µ—Å—Ç–∞–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é

# –í–ê–ñ–ù–û: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –≤—Ä—É—á–Ω—É—é –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
# –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ –ª–æ–º–∞—Ç—å —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
```

### –°–ø–∏—Å–æ–∫ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤ –ë–µ–ª–∞—Ä—É—Å–∏ (–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π)
```python
HOLIDAYS = {
    # –ù–æ–≤—ã–π –≥–æ–¥ (31 –¥–µ–∫–∞–±—Ä—è - 2 —è–Ω–≤–∞—Ä—è)
    "new_year": {
        "dates": ["12-31", "01-01", "01-02"],  # MM-DD —Ñ–æ—Ä–º–∞—Ç
        "recurring": True,  # –ö–∞–∂–¥—ã–π –≥–æ–¥
        "name": "–ù–æ–≤—ã–π –≥–æ–¥"
    },
    # –†–æ–∂–¥–µ—Å—Ç–≤–æ –•—Ä–∏—Å—Ç–æ–≤–æ (7 —è–Ω–≤–∞—Ä—è)
    "christmas_orthodox": {
        "dates": ["01-07"],
        "recurring": True,
        "name": "–†–æ–∂–¥–µ—Å—Ç–≤–æ –•—Ä–∏—Å—Ç–æ–≤–æ (–ø—Ä–∞–≤–æ—Å–ª–∞–≤–Ω–æ–µ)"
    },
    # –î–µ–Ω—å –≤—Å–µ—Ö –≤–ª—é–±–ª–µ–Ω–Ω—ã—Ö (14 —Ñ–µ–≤—Ä–∞–ª—è)
    "valentines_day": {
        "dates": ["02-14"],
        "recurring": True,
        "name": "–î–µ–Ω—å –≤—Å–µ—Ö –≤–ª—é–±–ª–µ–Ω–Ω—ã—Ö"
    },
    # –î–µ–Ω—å –∑–∞—â–∏—Ç–Ω–∏–∫–æ–≤ –û—Ç–µ—á–µ—Å—Ç–≤–∞ (23 —Ñ–µ–≤—Ä–∞–ª—è)
    "defenders_day": {
        "dates": ["02-23"],
        "recurring": True,
        "name": "–î–µ–Ω—å –∑–∞—â–∏—Ç–Ω–∏–∫–æ–≤ –û—Ç–µ—á–µ—Å—Ç–≤–∞"
    },
    # –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –∂–µ–Ω—Å–∫–∏–π –¥–µ–Ω—å (8 –º–∞—Ä—Ç–∞)
    "womens_day": {
        "dates": ["03-08"],
        "recurring": True,
        "name": "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –∂–µ–Ω—Å–∫–∏–π –¥–µ–Ω—å"
    },
    # –†–∞–¥—É–Ω–∏—Ü–∞ (21 –∞–ø—Ä–µ–ª—è) - –í–ê–ñ–ù–û: –¥–∞—Ç–∞ –º–µ–Ω—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –≥–æ–¥!
    "radonitsa": {
        "dates": ["04-21"],  # 2026 –≥–æ–¥, –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –µ–∂–µ–≥–æ–¥–Ω–æ
        "recurring": False,
        "name": "–†–∞–¥—É–Ω–∏—Ü–∞"
    },
    # –ü—Ä–∞–∑–¥–Ω–∏–∫ —Ç—Ä—É–¥–∞ (1 –º–∞—è)
    "labor_day": {
        "dates": ["05-01"],
        "recurring": True,
        "name": "–ü—Ä–∞–∑–¥–Ω–∏–∫ —Ç—Ä—É–¥–∞"
    },
    # –î–µ–Ω—å –ü–æ–±–µ–¥—ã (9 –º–∞—è)
    "victory_day": {
        "dates": ["05-09"],
        "recurring": True,
        "name": "–î–µ–Ω—å –ü–æ–±–µ–¥—ã"
    },
    # –î–µ–Ω—å –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –†–ë (3 –∏—é–ª—è)
    "independence_day": {
        "dates": ["07-03"],
        "recurring": True,
        "name": "–î–µ–Ω—å –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –†–µ—Å–ø—É–±–ª–∏–∫–∏ –ë–µ–ª–∞—Ä—É—Å—å"
    },
    # –î–µ–Ω—å –û–∫—Ç—è–±—Ä—å—Å–∫–æ–π —Ä–µ–≤–æ–ª—é—Ü–∏–∏ (7 –Ω–æ—è–±—Ä—è)
    "october_revolution": {
        "dates": ["11-07"],
        "recurring": True,
        "name": "–î–µ–Ω—å –û–∫—Ç—è–±—Ä—å—Å–∫–æ–π —Ä–µ–≤–æ–ª—é—Ü–∏–∏"
    },
    # –†–æ–∂–¥–µ—Å—Ç–≤–æ –•—Ä–∏—Å—Ç–æ–≤–æ –∫–∞—Ç–æ–ª–∏—á–µ—Å–∫–æ–µ (25 –¥–µ–∫–∞–±—Ä—è)
    "christmas_catholic": {
        "dates": ["12-25"],
        "recurring": True,
        "name": "–†–æ–∂–¥–µ—Å—Ç–≤–æ –•—Ä–∏—Å—Ç–æ–≤–æ (–∫–∞—Ç–æ–ª–∏—á–µ—Å–∫–æ–µ)"
    }
}
```

## –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

–°–æ–∑–¥–∞–¥–∏–º –º–æ–¥–µ–ª—å –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å DatePricingRule:

```python
# src/models/holiday_prepayment_rule.py

@dataclass_json
@dataclass
class HolidayPrepaymentRule:
    """–ü—Ä–∞–≤–∏–ª–æ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã –¥–ª—è –ø—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–≥–æ –¥–Ω—è."""

    rule_id: str  # –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, "new_year_2026")
    date: str  # –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –¥–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ "YYYY-MM-DD" –∏–ª–∏ "MM-DD" –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è
    is_recurring: bool  # True –µ—Å–ª–∏ –ø—Ä–∞–∑–¥–Ω–∏–∫ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –≥–æ–¥
    prepayment_percentage: int  # –ü—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã (–æ–±—ã—á–Ω–æ 100 –¥–ª—è –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤)
    name: str  # –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞
    is_active: bool = True  # –ú–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ
    description: Optional[str] = None  # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

    def __post_init__(self):
        """–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏."""
        # –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞—Ç—ã
        if self.is_recurring:
            # –î–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è: MM-DD
            if not re.match(r'^\d{2}-\d{2}$', self.date):
                raise ValueError(f"Recurring date must be in MM-DD format: {self.date}")
        else:
            # –î–ª—è —Ä–∞–∑–æ–≤—ã—Ö: YYYY-MM-DD
            if not re.match(r'^\d{4}-\d{2}-\d{2}$', self.date):
                raise ValueError(f"Non-recurring date must be in YYYY-MM-DD format: {self.date}")

        # –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—Ü–µ–Ω—Ç–∞
        if not 0 <= self.prepayment_percentage <= 100:
            raise ValueError(f"Prepayment percentage must be 0-100: {self.prepayment_percentage}")

    def applies_to_date(self, target_date: date) -> bool:
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ª–∏ –ø—Ä–∞–≤–∏–ª–æ –∫ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∞—Ç–µ."""
        if not self.is_active:
            return False

        if self.is_recurring:
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ –º–µ—Å—è—Ü –∏ –¥–µ–Ω—å
            date_str = target_date.strftime("%m-%d")
            return date_str == self.date
        else:
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–ª–Ω—É—é –¥–∞—Ç—É
            target_str = target_date.strftime("%Y-%m-%d")
            return target_str == self.date
```

### –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è PRP –≤ –ø–æ—Ä—è–¥–∫–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

```yaml
–ó–∞–¥–∞—á–∞ 1: –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å HolidayPrepaymentRule
–°–û–ó–î–ê–¢–¨ src/models/holiday_prepayment_rule.py:
  - –°–ö–û–ü–ò–†–û–í–ê–¢–¨ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–∑ date_pricing_rule.py
  - –ò–ó–ú–ï–ù–ò–¢–¨ –ø–æ–ª—è –ø–æ–¥ –Ω—É–∂–¥—ã –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã (prepayment_percentage)
  - –î–û–ë–ê–í–ò–¢–¨ –ø–æ–ª–µ is_recurring –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
  - –†–ï–ê–õ–ò–ó–û–í–ê–¢–¨ –º–µ—Ç–æ–¥ applies_to_date(target_date: date) -> bool
  - –î–û–ë–ê–í–ò–¢–¨ –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤ __post_init__
  - –°–û–•–†–ê–ù–ò–¢–¨ –ø–∞—Ç—Ç–µ—Ä–Ω @dataclass_json –∏ @dataclass

–ó–∞–¥–∞—á–∞ 2: –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª —Å –ø—Ä–∞–∑–¥–Ω–∏–∫–∞–º–∏
–°–û–ó–î–ê–¢–¨ src/config/holiday_prepayment_rules.json:
  - –§–û–†–ú–ê–¢: JSON —Å –º–∞—Å—Å–∏–≤–æ–º "prepayment_rules"
  - –î–û–ë–ê–í–ò–¢–¨ –≤—Å–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏ –∏–∑ —Å–ø–∏—Å–∫–∞ –≤—ã—à–µ
  - –î–õ–Ø –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤: "date": "MM-DD", "is_recurring": true
  - –î–õ–Ø —Ä–∞–∑–æ–≤—ã—Ö (–†–∞–¥—É–Ω–∏—Ü–∞): "date": "YYYY-MM-DD", "is_recurring": false
  - –í–°–ï –ø—Ä–∞–∑–¥–Ω–∏–∫–∏: "prepayment_percentage": 100, "is_active": true
  - –ü–†–ò–ú–ï–† —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
    ```json
    {
      "prepayment_rules": [
        {
          "rule_id": "new_year",
          "date": "01-01",
          "is_recurring": true,
          "prepayment_percentage": 100,
          "name": "–ù–æ–≤—ã–π –≥–æ–¥",
          "is_active": true,
          "description": "100% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ –Ω–∞ –ù–æ–≤—ã–π –≥–æ–¥"
        }
      ]
    }
    ```

–ó–∞–¥–∞—á–∞ 3: –û–±–Ω–æ–≤–∏—Ç—å FileService –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∞–≤–∏–ª –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã
–ò–ó–ú–ï–ù–ò–¢–¨ src/services/file_service.py:
  - –ù–ê–ô–¢–ò: –∫–ª–∞—Å—Å FileService (—Å—Ç—Ä–æ–∫–∞ 12)
  - –î–û–ë–ê–í–ò–¢–¨ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É: _HOLIDAY_PREPAYMENT_RULES_JSON = "src/config/holiday_prepayment_rules.json"
  - –î–û–ë–ê–í–ò–¢–¨ import: from src.models.holiday_prepayment_rule import HolidayPrepaymentRule
  - –°–ö–û–ü–ò–†–û–í–ê–¢–¨ –º–µ—Ç–æ–¥ get_date_pricing_rules() (—Å—Ç—Ä–æ–∫–∏ 56-66)
  - –°–û–ó–î–ê–¢–¨ –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥:
    ```python
    def get_holiday_prepayment_rules(self) -> List[HolidayPrepaymentRule]:
        if not os.path.exists(self._HOLIDAY_PREPAYMENT_RULES_JSON):
            raise FileNotFoundError(
                f"–§–∞–π–ª {self._HOLIDAY_PREPAYMENT_RULES_JSON} –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç."
            )

        rules_list = []
        with open(self._HOLIDAY_PREPAYMENT_RULES_JSON, "r", encoding="utf-8") as file:
            data = json.load(file)
            rules_list = [HolidayPrepaymentRule(**item) for item in data["prepayment_rules"]]
        return rules_list
    ```

–ó–∞–¥–∞—á–∞ 4: –°–æ–∑–¥–∞—Ç—å PrepaymentService –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã
–°–û–ó–î–ê–¢–¨ src/services/prepayment_service.py:
  - –°–ö–û–ü–ò–†–û–í–ê–¢–¨ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏–∑ date_pricing_service.py
  - –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ @singleton –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä
  - –†–ï–ê–õ–ò–ó–û–í–ê–¢–¨ –º–µ—Ç–æ–¥—ã:
    * get_applicable_rules(target_date: date) -> List[HolidayPrepaymentRule]
    * get_effective_rule(target_date: date) -> Optional[HolidayPrepaymentRule]
    * is_holiday(target_date: date) -> bool
    * calculate_prepayment(total_price: float, booking_date: date) -> float
  - –ü–ê–¢–¢–ï–†–ù _try_load_rules() –¥–ª—è –ª–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∞–≤–∏–ª
  - –õ–û–ì–ò–ö–ê calculate_prepayment:
    ```python
    def calculate_prepayment(self, total_price: float, booking_date: date) -> float:
        """
        –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–±—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏ –¥–∞—Ç—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.

        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        - 100% –æ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–ª—è –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã—Ö –¥–Ω–µ–π
        - 50% –æ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –¥–Ω–µ–π
        """
        effective_rule = self.get_effective_rule(booking_date)

        if effective_rule:
            # –ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å - –ø—Ä–∏–º–µ–Ω—è–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç –∏–∑ –ø—Ä–∞–≤–∏–ª–∞ (–æ–±—ã—á–Ω–æ 100%)
            percentage = effective_rule.prepayment_percentage
            prepayment = total_price * (percentage / 100.0)
            return round(prepayment, 2)
        else:
            # –û–±—ã—á–Ω—ã–π –¥–µ–Ω—å - 50% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞
            return round(total_price * 0.5, 2)
    ```

–ó–∞–¥–∞—á–∞ 5: –û–±–Ω–æ–≤–∏—Ç—å booking_handler.py –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞
–ò–ó–ú–ï–ù–ò–¢–¨ src/handlers/booking_handler.py:
  - –ù–ê–ô–¢–ò: —Å—Ç—Ä–æ–∫—É 1011 —Å f"üîπ <b>–ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞:</b> {PREPAYMENT} —Ä—É–±.\n"
  - –î–û–ë–ê–í–ò–¢–¨ import:
    ```python
    from src.services.prepayment_service import PrepaymentService
    ```
  - –ò–ó–ú–ï–ù–ò–¢–¨ —Ñ—É–Ω–∫—Ü–∏—é payment_message() (–æ–∫–æ–ª–æ —Å—Ç—Ä–æ–∫–∏ 980):
    ```python
    # –ü–æ–ª—É—á–∞–µ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ Redis
    booking = redis_service.get_booking(update)

    # –ù–û–í–û–ï: —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
    prepayment_service = PrepaymentService()
    prepayment_amount = prepayment_service.calculate_prepayment(
        total_price=booking.price,
        booking_date=booking.start_booking_date.date()
    )

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—É—é –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É –≤ Redis draft
    redis_service.update_booking_field(update, "prepayment_price", prepayment_amount)

    # –ó–ê–ú–ï–ù–ò–¢–¨ —Å—Ç—Ä–æ–∫—É 1011:
    message = (
        f"üí∞ <b>–û–±—â–∞—è —Å—É–º–º–∞ –æ–ø–ª–∞—Ç—ã:</b> {booking.price} —Ä—É–±.\n\n"
        f"üîπ <b>–ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞:</b> {prepayment_amount} —Ä—É–±.\n"  # –ò–ó–ú–ï–ù–ï–ù–û
        "üí° –ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è..."
    )
    ```
  - –í–ê–ñ–ù–û: –Ω–µ —Ç—Ä–æ–≥–∞—Ç—å –±–ª–æ–∫ –¥–ª—è –ø–æ–¥–∞—Ä–æ—á–Ω—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ (—Å—Ç—Ä–æ–∫–∞ 999-1007)

–ó–∞–¥–∞—á–∞ 6: –û–±–Ω–æ–≤–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –ë–î
–ò–ó–ú–ï–ù–ò–¢–¨ src/handlers/booking_handler.py:
  - –ù–ê–ô–¢–ò: —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑—ã–≤–∞–µ—Ç database_service.create_booking()
  - –ù–ê–ô–¢–ò –≤—Å–µ –º–µ—Å—Ç–∞ –≥–¥–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è BookingBase
  - –£–ë–ï–î–ò–¢–¨–°–Ø —á—Ç–æ prepayment_price –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∏–∑ Redis draft:
    ```python
    booking = redis_service.get_booking(update)

    # –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥–∞–µ–º —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—É—é –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É
    new_booking = database_service.create_booking(
        user_id=user.id,
        start_date=booking.start_booking_date,
        end_date=booking.finish_booking_date,
        tariff=booking.tariff,
        price=booking.price,
        prepayment_price=booking.prepayment_price,  # –î–û–ë–ê–í–ò–¢–¨ –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
        # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
    )
    ```

–ó–∞–¥–∞—á–∞ 7: –û–±–Ω–æ–≤–∏—Ç—å –º–æ–¥–µ–ª—å BookingDraft –≤ Redis
–ü–†–û–í–ï–†–ò–¢–¨ src/models/booking_draft.py:
  - –£–ë–ï–î–ò–¢–¨–°–Ø —á—Ç–æ –µ—Å—Ç—å –ø–æ–ª–µ prepayment_price: Optional[float]
  - –ï–°–õ–ò –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç - –î–û–ë–ê–í–ò–¢–¨:
    ```python
    @dataclass
    class BookingDraft:
        # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
        prepayment_price: Optional[float] = None  # –ù–û–í–û–ï –µ—Å–ª–∏ –Ω–µ—Ç
    ```

–ó–∞–¥–∞—á–∞ 8: –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ admin_handler
–ü–†–û–í–ï–†–ò–¢–¨ src/handlers/admin_handler.py:
  - –ù–ê–ô–¢–ò —Å—Ç—Ä–æ–∫—É 1025 —Å f"–¢–µ–∫—É—â–∞—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞: <b>{booking.prepayment_price}"
  - –ü–†–û–í–ï–†–ò–¢–¨ —á—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è booking.prepayment_price (–∏–∑ –ë–î), –∞ –Ω–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞
  - –ù–ï –ú–ï–ù–Ø–¢–¨ –ª–æ–≥–∏–∫—É —Ä—É—á–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

–ó–∞–¥–∞—á–∞ 9: –î–æ–±–∞–≤–∏—Ç—å –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
–†–ê–°–°–ú–û–¢–†–ï–¢–¨ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ PrepaymentService:
  - get_holiday_name(target_date: date) -> Optional[str] - –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–∞–∑–¥–Ω–∏–∫–∞
  - get_prepayment_explanation(target_date: date) -> str - —Ç–µ–∫—Å—Ç –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –ü–†–ò–ú–ï–†:
    ```python
    def get_prepayment_explanation(self, target_date: date) -> str:
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—Å—Ç –æ–±—ä—è—Å–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã."""
        rule = self.get_effective_rule(target_date)
        if rule:
            return f"üéâ {rule.name} - —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ (100%)"
        else:
            return "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 50% –æ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏"
    ```

–ó–∞–¥–∞—á–∞ 10: –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–î–û–ë–ê–í–ò–¢–¨ –≤ PrepaymentService:
  - Import: from src.services.logger_service import LoggerService
  - –õ–û–ì–ò–†–û–í–ê–¢–¨ —Ä–∞—Å—á–µ—Ç—ã –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã:
    ```python
    def calculate_prepayment(self, total_price: float, booking_date: date) -> float:
        effective_rule = self.get_effective_rule(booking_date)

        if effective_rule:
            LoggerService.info(
                __name__,
                f"Holiday prepayment: {effective_rule.name} on {booking_date}, "
                f"{effective_rule.prepayment_percentage}% = {prepayment}"
            )
        else:
            LoggerService.info(
                __name__,
                f"Standard prepayment: {booking_date}, 50% = {prepayment}"
            )

        return prepayment
    ```
```

### –ü—Å–µ–≤–¥–æ–∫–æ–¥ –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏ (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏)

```python
# –ó–∞–¥–∞—á–∞ 4: PrepaymentService - –∫–ª—é—á–µ–≤–∞—è –ª–æ–≥–∏–∫–∞

@singleton
class PrepaymentService:
    """–°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã —Å —É—á–µ—Ç–æ–º –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã—Ö –¥–Ω–µ–π."""

    _rules: List[HolidayPrepaymentRule] = []

    def get_applicable_rules(self, target_date: date) -> List[HolidayPrepaymentRule]:
        """–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∞—Ç—ã."""
        rules = self._try_load_rules()
        applicable = []

        for rule in rules:
            if rule.applies_to_date(target_date):
                applicable.append(rule)

        return applicable

    def get_effective_rule(self, target_date: date) -> Optional[HolidayPrepaymentRule]:
        """
        –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ —Å –Ω–∞–∏–≤—ã—Å—à–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∞—Ç—ã.
        –ï—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∞–≤–∏–ª –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è - –±–µ—Ä–µ–º –ø–µ—Ä–≤–æ–µ (–ø–æ rule_id).
        """
        applicable_rules = self.get_applicable_rules(target_date)
        return applicable_rules[0] if applicable_rules else None

    def is_holiday(self, target_date: date) -> bool:
        """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –¥–∞—Ç–∞ –ø—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–π."""
        return self.get_effective_rule(target_date) is not None

    def calculate_prepayment(
        self,
        total_price: float,
        booking_date: date
    ) -> float:
        """
        –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏ –¥–∞—Ç—ã.

        –ü–ê–¢–¢–ï–†–ù: –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∏–ª–∞ -> –ø—Ä–∏–º–µ–Ω—è–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç -> –æ–∫—Ä—É–≥–ª—è–µ–º

        Args:
            total_price: –ü–æ–ª–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
            booking_date: –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

        Returns:
            –°—É–º–º–∞ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã –≤ —Ä—É–±–ª—è—Ö
        """
        effective_rule = self.get_effective_rule(booking_date)

        if effective_rule:
            # –ü–†–ê–ó–î–ù–ò–ß–ù–´–ô –î–ï–ù–¨: –ø—Ä–∏–º–µ–Ω—è–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç –∏–∑ –ø—Ä–∞–≤–∏–ª–∞
            percentage = effective_rule.prepayment_percentage
            prepayment = total_price * (percentage / 100.0)

            LoggerService.info(
                __name__,
                f"Holiday prepayment calculation: {effective_rule.name}, "
                f"{percentage}% of {total_price} = {prepayment}"
            )
        else:
            # –û–ë–´–ß–ù–´–ô –î–ï–ù–¨: 50% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞
            prepayment = total_price * 0.5

            LoggerService.info(
                __name__,
                f"Standard prepayment calculation: 50% of {total_price} = {prepayment}"
            )

        # –ö–†–ò–¢–ò–ß–ù–û: –æ–∫—Ä—É–≥–ª—è–µ–º –¥–æ 2 –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π
        return round(prepayment, 2)

    def get_holiday_name(self, target_date: date) -> Optional[str]:
        """–ü–æ–ª—É—á–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∞—Ç—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)."""
        rule = self.get_effective_rule(target_date)
        return rule.name if rule else None

    def _try_load_rules(self) -> List[HolidayPrepaymentRule]:
        """
        –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∞–≤–∏–ª –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã.
        –ü–ê–¢–¢–ï–†–ù: Singleton + lazy loading (–∫–∞–∫ –≤ DatePricingService)
        """
        if not self._rules:
            file_service = FileService()
            self._rules = file_service.get_holiday_prepayment_rules()
        return self._rules


# –ó–∞–¥–∞—á–∞ 5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ booking_handler.py

async def payment_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """
    –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –æ–ø–ª–∞—Ç–µ.
    –ö–†–ò–¢–ò–ß–ù–û: –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º.
    """
    LoggerService.info(__name__, "Payment message", update)

    # –ü–æ–ª—É—á–∞–µ–º draft –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑ Redis
    booking = redis_service.get_booking(update)

    # –ù–û–í–ê–Ø –õ–û–ì–ò–ö–ê: –†–∞—Å—á–µ—Ç –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã
    prepayment_service = PrepaymentService()
    prepayment_amount = prepayment_service.calculate_prepayment(
        total_price=booking.price,
        booking_date=booking.start_booking_date.date()
    )

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ Redis draft –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    redis_service.update_booking_field(
        update,
        "prepayment_price",
        prepayment_amount
    )

    # –ö–†–ò–¢–ò–ß–ù–û: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø —Ç–∞—Ä–∏—Ñ–∞ (–ø–æ–¥–∞—Ä–æ—á–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç - –æ—Å–æ–±—ã–π —Å–ª—É—á–∞–π)
    if booking.tariff == Tariff.GIFT:
        # –ü–æ–¥–∞—Ä–æ—á–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç: 100% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ –≤—Å–µ–≥–¥–∞
        message = (
            f"üí∞ <b>–û–±—â–∞—è —Å—É–º–º–∞ –æ–ø–ª–∞—Ç—ã:</b> {booking.price} —Ä—É–±.\n\n"
            f"üîπ <b>–ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞:</b> {booking.price} —Ä—É–±.\n"  # 100% –¥–ª—è –ø–æ–¥–∞—Ä–∫–∞
            "üìå <b>–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã (BSB-Bank):</b>\n"
            # ... rest of gift certificate message
        )
    else:
        # –û–±—ã—á–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—É—é –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É

        # –û–ü–¶–ò–û–ù–ê–õ–¨–ù–û: –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –µ—Å–ª–∏ –ø—Ä–∞–∑–¥–Ω–∏–∫
        holiday_explanation = ""
        if prepayment_service.is_holiday(booking.start_booking_date.date()):
            holiday_name = prepayment_service.get_holiday_name(
                booking.start_booking_date.date()
            )
            holiday_explanation = f"\nüéâ <b>{holiday_name}</b> - —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞.\n"

        message = (
            f"üí∞ <b>–û–±—â–∞—è —Å—É–º–º–∞ –æ–ø–ª–∞—Ç—ã:</b> {booking.price} —Ä—É–±.\n\n"
            f"üîπ <b>–ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞:</b> {prepayment_amount} —Ä—É–±.\n"  # –ò–ó–ú–ï–ù–ï–ù–û
            f"{holiday_explanation}"  # –ù–û–í–û–ï
            "üí° –ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, "
            "–Ω–æ –≤—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –±—Ä–æ–Ω—å –Ω–∞ –¥—Ä—É–≥—É—é –¥–∞—Ç—É.\n\n"
            "üìå <b>–°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã (BSB-Bank):</b>\n"
            f"üí≥ –ü–æ –Ω–æ–º–µ—Ä—É –∫–∞—Ä—Ç—ã: <b>{BANK_CARD_NUMBER}</b>\n\n"
            "‚ùó <b>–í–∞–∂–Ω–æ!</b>\n"
            "–ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –∏–ª–∏ PDF –¥–æ–∫—É–º–µ–Ω—Ç —Å —á–µ–∫–æ–º.\n"
            "üì© –≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤–∞—à–µ–π –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã.\n\n"
            "üôè –°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–Ω–∏–º–∞–Ω–∏–µ!"
        )

    # ... rest of handler (keyboard, reply_markup, etc.)
```

### –¢–æ—á–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

```yaml
–ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø:
  - create: src/config/holiday_prepayment_rules.json
  - pattern: JSON file —Å –º–∞—Å—Å–∏–≤–æ–º –ø—Ä–∞–≤–∏–ª
  - validation: –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ FileService, –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ dataclass

–ú–û–î–ï–õ–ò –î–ê–ù–ù–´–•:
  - create: src/models/holiday_prepayment_rule.py
  - integration: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ PrepaymentService
  - pattern: @dataclass + @dataclass_json + validation

–°–ï–†–í–ò–°–´:
  - create: src/services/prepayment_service.py
  - integration: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ booking_handler.py
  - pattern: @singleton + lazy loading –ø—Ä–∞–≤–∏–ª

–§–ê–ô–õ–û–í–´–ô –°–ï–†–í–ò–°:
  - modify: src/services/file_service.py
  - add: –º–µ—Ç–æ–¥ get_holiday_prepayment_rules()
  - pattern: –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ get_date_pricing_rules()

–û–ë–†–ê–ë–û–¢–ß–ò–ö–ò:
  - modify: src/handlers/booking_handler.py
  - location: —Ñ—É–Ω–∫—Ü–∏—è payment_message() (—Å—Ç—Ä–æ–∫–∞ ~980)
  - change: –ó–∞–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É PREPAYMENT –Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç

–ë–ê–ó–ê –î–ê–ù–ù–´–•:
  - no migration needed: –ø–æ–ª–µ prepayment_price —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
  - ensure: –ó–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –ø—Ä–∏ create_booking()

REDIS DRAFT:
  - ensure: BookingDraft –∏–º–µ–µ—Ç –ø–æ–ª–µ prepayment_price
  - save: –ü–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –ë–î –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ —É–∂–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞
```

## –¶–∏–∫–ª –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### –£—Ä–æ–≤–µ–Ω—å 1: –°–∏–Ω—Ç–∞–∫—Å–∏—Å –∏ —Å—Ç–∏–ª—å
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ò–ó –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
cd C:\projects\secret-house-booking-bot

# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)
pip install -r requirements.txt

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ Python
python -m py_compile src/models/holiday_prepayment_rule.py
python -m py_compile src/services/prepayment_service.py
python -m py_compile src/services/file_service.py

# –û–∂–∏–¥–∞–µ—Ç—Å—è: –ù–µ—Ç –æ—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
# –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏: –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏, –ø–æ–≤—Ç–æ—Ä–∏—Ç—å
```

### –£—Ä–æ–≤–µ–Ω—å 2: –í–∞–ª–∏–¥–∞—Ü–∏—è JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```python
# –°–æ–∑–¥–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
# test_config_validation.py

import json
from src.models.holiday_prepayment_rule import HolidayPrepaymentRule

def test_load_rules():
    """–¢–µ—Å—Ç–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∞–≤–∏–ª –∏–∑ JSON."""
    with open("src/config/holiday_prepayment_rules.json", "r", encoding="utf-8") as f:
        data = json.load(f)

    rules = [HolidayPrepaymentRule(**item) for item in data["prepayment_rules"]]

    print(f"‚úì –ó–∞–≥—Ä—É–∂–µ–Ω–æ {len(rules)} –ø—Ä–∞–≤–∏–ª")

    for rule in rules:
        print(f"  - {rule.name}: {rule.date} ({rule.prepayment_percentage}%)")

    return rules

if __name__ == "__main__":
    try:
        rules = test_load_rules()
        print("\n‚úì –í—Å–µ –ø—Ä–∞–≤–∏–ª–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω—ã")
    except Exception as e:
        print(f"\n‚úó –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏: {e}")
        exit(1)
```

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏
python test_config_validation.py

# –û–∂–∏–¥–∞–µ—Ç—Å—è: –í—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –±–µ–∑ –æ—à–∏–±–æ–∫
# –ï—Å–ª–∏ –æ—à–∏–±–∫–∏: –ò—Å–ø—Ä–∞–≤–∏—Ç—å JSON –∏–ª–∏ –º–æ–¥–µ–ª—å, –ø–æ–≤—Ç–æ—Ä–∏—Ç—å
```

### –£—Ä–æ–≤–µ–Ω—å 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞
```python
# test_prepayment_service.py

from datetime import date
from src.services.prepayment_service import PrepaymentService

def test_standard_day_prepayment():
    """–¢–µ—Å—Ç –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã –¥–ª—è –æ–±—ã—á–Ω–æ–≥–æ –¥–Ω—è (50%)."""
    service = PrepaymentService()

    # –¢–µ—Å—Ç–æ–≤–∞—è –¥–∞—Ç–∞: –æ–±—ã—á–Ω—ã–π –¥–µ–Ω—å (–Ω–µ –ø—Ä–∞–∑–¥–Ω–∏–∫)
    test_date = date(2026, 3, 15)  # 15 –º–∞—Ä—Ç–∞ 2026
    total_price = 1000.0

    prepayment = service.calculate_prepayment(total_price, test_date)

    expected = 500.0  # 50% –æ—Ç 1000
    assert prepayment == expected, f"Expected {expected}, got {prepayment}"
    print(f"‚úì –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞: {prepayment} —Ä—É–±. (50%)")

def test_holiday_prepayment():
    """–¢–µ—Å—Ç –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã –¥–ª—è –ø—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–≥–æ –¥–Ω—è (100%)."""
    service = PrepaymentService()

    # –¢–µ—Å—Ç–æ–≤–∞—è –¥–∞—Ç–∞: –ù–æ–≤—ã–π –≥–æ–¥
    test_date = date(2026, 1, 1)  # 1 —è–Ω–≤–∞—Ä—è 2026
    total_price = 1000.0

    prepayment = service.calculate_prepayment(total_price, test_date)

    expected = 1000.0  # 100% –æ—Ç 1000
    assert prepayment == expected, f"Expected {expected}, got {prepayment}"
    print(f"‚úì –ü—Ä–∞–∑–¥–Ω–∏—á–Ω–∞—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞: {prepayment} —Ä—É–±. (100%)")

    holiday_name = service.get_holiday_name(test_date)
    print(f"  –ü—Ä–∞–∑–¥–Ω–∏–∫: {holiday_name}")

def test_recurring_holiday():
    """–¢–µ—Å—Ç –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–≥–æ—Å—è –ø—Ä–∞–∑–¥–Ω–∏–∫–∞ (–î–µ–Ω—å –ü–æ–±–µ–¥—ã)."""
    service = PrepaymentService()

    # –î–µ–Ω—å –ü–æ–±–µ–¥—ã: 9 –º–∞—è
    test_date = date(2026, 5, 9)
    total_price = 800.0

    prepayment = service.calculate_prepayment(total_price, test_date)

    assert service.is_holiday(test_date), "9 –º–∞—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–º"
    assert prepayment == 800.0, f"Expected 800.0, got {prepayment}"
    print(f"‚úì –î–µ–Ω—å –ü–æ–±–µ–¥—ã: {prepayment} —Ä—É–±. (100%)")

def test_valentines_day():
    """–¢–µ—Å—Ç –î–µ–Ω—å –≤—Å–µ—Ö –≤–ª—é–±–ª–µ–Ω–Ω—ã—Ö (14 —Ñ–µ–≤—Ä–∞–ª—è)."""
    service = PrepaymentService()

    test_date = date(2026, 2, 14)
    total_price = 600.0

    prepayment = service.calculate_prepayment(total_price, test_date)

    assert prepayment == 600.0
    print(f"‚úì –î–µ–Ω—å –≤—Å–µ—Ö –≤–ª—é–±–ª–µ–Ω–Ω—ã—Ö: {prepayment} —Ä—É–±. (100%)")

def test_rounding():
    """–¢–µ—Å—Ç –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã."""
    service = PrepaymentService()

    test_date = date(2026, 3, 20)  # –û–±—ã—á–Ω—ã–π –¥–µ–Ω—å
    total_price = 333.33

    prepayment = service.calculate_prepayment(total_price, test_date)

    # 50% –æ—Ç 333.33 = 166.665, –¥–æ–ª–∂–Ω–æ –æ–∫—Ä—É–≥–ª–∏—Ç—å—Å—è –¥–æ 166.67
    expected = 166.67
    assert prepayment == expected, f"Expected {expected}, got {prepayment}"
    print(f"‚úì –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ: {prepayment}")

if __name__ == "__main__":
    print("–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ PrepaymentService...\n")

    try:
        test_standard_day_prepayment()
        test_holiday_prepayment()
        test_recurring_holiday()
        test_valentines_day()
        test_rounding()

        print("\n‚úì –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!")
    except AssertionError as e:
        print(f"\n‚úó –¢–µ—Å—Ç –ø—Ä–æ–≤–∞–ª–µ–Ω: {e}")
        exit(1)
    except Exception as e:
        print(f"\n‚úó –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ç–µ—Å—Ç–æ–≤: {e}")
        exit(1)
```

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å–µ—Ä–≤–∏—Å–∞
python test_prepayment_service.py

# –û–∂–∏–¥–∞–µ—Ç—Å—è: –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
# –ï—Å–ª–∏ –ø—Ä–æ–≤–∞–ª—ã: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –≤ PrepaymentService, –ø–æ–≤—Ç–æ—Ä–∏—Ç—å
```

### –£—Ä–æ–≤–µ–Ω—å 4: –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±–æ—Ç–µ
```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –≤ debug —Ä–µ–∂–∏–º–µ
export ENV=debug
python src/main.py

# 2. –í Telegram –æ—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞ @the_secret_house_booking_bot

# –¢–ï–°–¢ 1: –û–±—ã—á–Ω—ã–π –¥–µ–Ω—å (50% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞)
# –î–µ–π—Å—Ç–≤–∏—è:
#   1. /start -> –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –¥–æ–º
#   2. –í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É: 15 –º–∞—Ä—Ç–∞ 2026 (–æ–±—ã—á–Ω—ã–π –¥–µ–Ω—å)
#   3. –í—ã–±—Ä–∞—Ç—å —Ç–∞—Ä–∏—Ñ: "–°—É—Ç–æ—á–Ω–æ –æ—Ç 3 —á–µ–ª–æ–≤–µ–∫" (700 —Ä—É–±)
#   4. –ü—Ä–æ–π—Ç–∏ –≤—Å–µ —à–∞–≥–∏ –¥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ–ø–ª–∞—Ç–µ
# –û–∂–∏–¥–∞–µ—Ç—Å—è:
#   - –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: "–ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞: 350 —Ä—É–±." (50% –æ—Ç 700)
#   - –ù–µ—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø—Ä–∞–∑–¥–Ω–∏–∫–∞

# –¢–ï–°–¢ 2: –ù–æ–≤—ã–π –≥–æ–¥ (100% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞)
# –î–µ–π—Å—Ç–≤–∏—è:
#   1. –ù–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
#   2. –í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É: 1 —è–Ω–≤–∞—Ä—è 2026 (–ù–æ–≤—ã–π –≥–æ–¥)
#   3. –í—ã–±—Ä–∞—Ç—å —Ç–∞—Ä–∏—Ñ: "–°—É—Ç–æ—á–Ω–æ –æ—Ç 3 —á–µ–ª–æ–≤–µ–∫" (700 —Ä—É–±)
#   4. –ü—Ä–æ–π—Ç–∏ –≤—Å–µ —à–∞–≥–∏ –¥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ–ø–ª–∞—Ç–µ
# –û–∂–∏–¥–∞–µ—Ç—Å—è:
#   - –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: "–ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞: 700 —Ä—É–±." (100% –æ—Ç 700)
#   - –ï—Å—Ç—å —Ç–µ–∫—Å—Ç: "üéâ –ù–æ–≤—ã–π –≥–æ–¥ - —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞"

# –¢–ï–°–¢ 3: –î–µ–Ω—å –ü–æ–±–µ–¥—ã (100% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞)
# –î–µ–π—Å—Ç–≤–∏—è:
#   1. –ù–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
#   2. –í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É: 9 –º–∞—è 2026
#   3. –í—ã–±—Ä–∞—Ç—å —Ç–∞—Ä–∏—Ñ: "–†–∞–±–æ—á–∏–π" (180 —Ä—É–±)
#   4. –ü—Ä–æ–π—Ç–∏ –≤—Å–µ —à–∞–≥–∏ –¥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ–ø–ª–∞—Ç–µ
# –û–∂–∏–¥–∞–µ—Ç—Å—è:
#   - –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: "–ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞: 180 —Ä—É–±." (100% –æ—Ç 180)
#   - –ï—Å—Ç—å —Ç–µ–∫—Å—Ç: "üéâ –î–µ–Ω—å –ü–æ–±–µ–¥—ã - —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞"

# –¢–ï–°–¢ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î
# –î–µ–π—Å—Ç–≤–∏—è:
#   1. –ó–∞–≤–µ—Ä—à–∏—Ç—å –æ–¥–Ω–æ –∏–∑ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π (–∑–∞–≥—Ä—É–∑–∏—Ç—å —á–µ–∫)
#   2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
#      sqlite3 test_the_secret_house.db
#      SELECT id, start_date, price, prepayment_price FROM booking ORDER BY id DESC LIMIT 1;
# –û–∂–∏–¥–∞–µ—Ç—Å—è:
#   - prepayment_price —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é
#   - –î–ª—è –æ–±—ã—á–Ω–æ–≥–æ –¥–Ω—è: prepayment_price = price * 0.5
#   - –î–ª—è –ø—Ä–∞–∑–¥–Ω–∏–∫–∞: prepayment_price = price

# –¢–ï–°–¢ 5: –ê–¥–º–∏–Ω –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É –≤—Ä—É—á–Ω—É—é
# –î–µ–π—Å—Ç–≤–∏—è:
#   1. –í–æ–π—Ç–∏ –∫–∞–∫ –∞–¥–º–∏–Ω
#   2. /booking_list -> –í—ã–±—Ä–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
#   3. –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É -> –í–≤–µ—Å—Ç–∏ –Ω–æ–≤—É—é —Å—É–º–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, 100)
# –û–∂–∏–¥–∞–µ—Ç—Å—è:
#   - –ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–∞ 100 —Ä—É–±
#   - –†—É—á–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞
```

### –£—Ä–æ–≤–µ–Ω—å 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
```bash
# –í–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

# –î–ª—è –æ–±—ã—á–Ω–æ–≥–æ –¥–Ω—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# INFO: Standard prepayment calculation: 50% of 700.0 = 350.0

# –î–ª—è –ø—Ä–∞–∑–¥–Ω–∏–∫–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# INFO: Holiday prepayment calculation: –ù–æ–≤—ã–π –≥–æ–¥, 100% of 700.0 = 700.0

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∞–≤–∏–ª:
# –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: FileNotFoundError, ValueError, JSON decode errors
```

## –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏

- [ ] –í—Å–µ Python —Ñ–∞–π–ª—ã –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è
- [ ] PrepaymentService –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç 50% –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –¥–Ω–µ–π
- [ ] PrepaymentService –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç 100% –¥–ª—è –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
- [ ] –í—Å–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏ –∏–∑ —Å–ø–∏—Å–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- [ ] –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –ø—Ä–∞–∑–¥–Ω–∏–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –∫–∞–∂–¥—ã–π –≥–æ–¥
- [ ] –ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—É–º–º—É –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏
- [ ] –ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –≤—Ä—É—á–Ω—É—é –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É
- [ ] –ü–æ–¥–∞—Ä–æ—á–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤—Å–µ –µ—â–µ —Ä–∞–±–æ—Ç–∞—é—Ç (100% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞)
- [ ] –õ–æ–≥–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–∞—Å—á–µ—Ç–∞—Ö –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∞–≤–∏–ª
- [ ] –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (2 –∑–Ω–∞–∫–∞ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π)
- [ ] –ë–æ—Ç –Ω–µ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –Ω–µ–≤–µ—Ä–Ω—ã—Ö –¥–∞—Ç–∞—Ö –∏–ª–∏ –ø—É—Å—Ç—ã—Ö –ø—Ä–∞–≤–∏–ª–∞—Ö

---

## –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã, –∫–æ—Ç–æ—Ä—ã—Ö —Å–ª–µ–¥—É–µ—Ç –∏–∑–±–µ–≥–∞—Ç—å

- ‚ùå –ù–µ —É–¥–∞–ª—è–π—Ç–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É PREPAYMENT –∏–∑ config.py - –æ–Ω–∞ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ fallback
- ‚ùå –ù–µ –º–µ–Ω—è–π—Ç–µ –ª–æ–≥–∏–∫—É –¥–ª—è –ø–æ–¥–∞—Ä–æ—á–Ω—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ - —Ç–∞–º –≤—Å–µ–≥–¥–∞ 100%
- ‚ùå –ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –ø—Ä–æ –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ round(value, 2)
- ‚ùå –ù–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤ __post_init__ - –æ–Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ hardcoded —Å–ø–∏—Å–∫–∏ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤ –≤ –∫–æ–¥–µ - —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- ‚ùå –ù–µ –ª–æ–º–∞–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä—É—á–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
- ‚ùå –ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –ø—Ä–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ - –æ–Ω–æ –ø–æ–º–æ–≥–∞–µ—Ç –≤ –æ—Ç–ª–∞–¥–∫–µ
- ‚ùå –ù–µ –ø—Ä–æ–ø—É—Å–∫–∞–π—Ç–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ (–æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ, –ø–µ—Ä–µ—Ö–æ–¥ –≥–æ–¥–∞, etc.)
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ sync functions –≤ async handlers - —Ç–æ–ª—å–∫–æ async/await
- ‚ùå –ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –ø—Ä–æ encoding="utf-8" –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ JSON —Ñ–∞–π–ª–æ–≤ (–∫–∏—Ä–∏–ª–ª–∏—Ü–∞!)

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –†–∞–¥—É–Ω–∏—Ü–∞ - –∏–∑–º–µ–Ω—è–µ–º–∞—è –¥–∞—Ç–∞
–†–∞–¥—É–Ω–∏—Ü–∞ - —ç—Ç–æ **–ø–µ—Ä–µ—Ö–æ–¥—è—â–∏–π –ø—Ä–∞–∑–¥–Ω–∏–∫** (9-–π –¥–µ–Ω—å –ø–æ—Å–ª–µ –ø—Ä–∞–≤–æ—Å–ª–∞–≤–Ω–æ–π –ü–∞—Å—Ö–∏), –¥–∞—Ç–∞ –º–µ–Ω—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –≥–æ–¥:
- 2026: 21 –∞–ø—Ä–µ–ª—è
- 2027: 13 –∞–ø—Ä–µ–ª—è
- 2028: 2 –º–∞—è

**–†–ï–®–ï–ù–ò–ï**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `is_recurring: false` –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É –Ω–∞ —Ç–µ–∫—É—â–∏–π –≥–æ–¥. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å –¥–∞—Ç—É –µ–∂–µ–≥–æ–¥–Ω–æ –≤ JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–∞–≤–∏–ª –Ω–∞ –æ–¥–Ω—É –¥–∞—Ç—É
–ï—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∞–≤–∏–ª –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ –æ–¥–Ω–æ–π –¥–∞—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ù–æ–≤—ã–π –≥–æ–¥ –∏ –∫–∞–∫–æ–µ-—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ), –±–µ—Ä–µ–º –ø–µ—Ä–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ –∏–∑ —Å–ø–∏—Å–∫–∞. **–ü–æ—Ä—è–¥–æ–∫ –≤ JSON —Ñ–∞–π–ª–µ –≤–∞–∂–µ–Ω**.

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã –≤ Redis
BookingDraft –≤ Redis –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—É—é –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É –î–û —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î, —á—Ç–æ–±—ã –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ BookingBase –∑–Ω–∞—á–µ–Ω–∏–µ —É–∂–µ –±—ã–ª–æ –∏–∑–≤–µ—Å—Ç–Ω–æ.

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
–°—Ç–∞—Ä—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –ë–î –º–æ–≥—É—Ç –∏–º–µ—Ç—å `prepayment_price = 80` (—Å—Ç–∞—Ä–∞—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞). –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –Ω–µ –Ω—É–∂–Ω–æ –∏—Ö –æ–±–Ω–æ–≤–ª—è—Ç—å. –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ –Ω–æ–≤—ã–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º.

---

## –û—Ü–µ–Ω–∫–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏: 9/10

–í—ã—Å–æ–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –±–ª–∞–≥–æ–¥–∞—Ä—è:
+ –ß–µ—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º (50% vs 100%)
+ –°—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –ø–æ—Ö–æ–∂–µ–º—É –ø–∞—Ç—Ç–µ—Ä–Ω—É (DatePricingService)
+ –•–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–æ–¥–æ–≤–æ–π –±–∞–∑–µ
+ –ù–∞–ª–∏—á–∏—é –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (dataclasses, singleton, JSON)
+ –ü—Ä–æ—Å—Ç–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞—Ç—ã + –ø—Ä–æ—Ü–µ–Ω—Ç)

–ù–µ–±–æ–ª—å—à–∞—è –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç—å:
- –¢–æ—á–Ω–æ–µ –º–µ—Å—Ç–æ –≤—ã–∑–æ–≤–∞ create_booking() –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è (–Ω—É–∂–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)
- –í–æ–∑–º–æ–∂–Ω—ã edge cases —Å –ø–µ—Ä–µ—Ö–æ–¥–æ–º –≥–æ–¥–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤ (–Ω–æ dataclass –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–º–æ–∂–µ—Ç)

**–¶–µ–ª–µ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ –¥–ª—è –æ–¥–Ω–æ—ç—Ç–∞–ø–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**: 8+ ‚úì –î–æ—Å—Ç–∏–≥–Ω—É—Ç–∞

**–§–∞–∫—Ç–æ—Ä—ã, –≤–ª–∏—è—é—â–∏–µ –Ω–∞ –æ—Ü–µ–Ω–∫—É**:
- –Ø—Å–Ω–æ—Å—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π: +2
- –ù–∞–ª–∏—á–∏–µ –ø–æ—Ö–æ–∂–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –≤ –∫–æ–¥–æ–≤–æ–π –±–∞–∑–µ: +2
- –ü–æ–ª–Ω–æ—Ç–∞ –≤–Ω–µ—à–Ω–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (Python datetime, dataclasses): +2
- –ò—Å–ø–æ–ª–Ω–∏–º—ã–µ validation gates: +2
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫: +1

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ê: –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞ holiday_prepayment_rules.json

```json
{
  "prepayment_rules": [
    {
      "rule_id": "new_year_dec_31",
      "date": "12-31",
      "is_recurring": true,
      "prepayment_percentage": 100,
      "name": "–ù–æ–≤—ã–π –≥–æ–¥ (31 –¥–µ–∫–∞–±—Ä—è)",
      "is_active": true,
      "description": "–ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏ - —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞"
    },
    {
      "rule_id": "new_year_jan_01",
      "date": "01-01",
      "is_recurring": true,
      "prepayment_percentage": 100,
      "name": "–ù–æ–≤—ã–π –≥–æ–¥ (1 —è–Ω–≤–∞—Ä—è)",
      "is_active": true,
      "description": "–ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏ - —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞"
    },
    {
      "rule_id": "new_year_jan_02",
      "date": "01-02",
      "is_recurring": true,
      "prepayment_percentage": 100,
      "name": "–ù–æ–≤—ã–π –≥–æ–¥ (2 —è–Ω–≤–∞—Ä—è)",
      "is_active": true,
      "description": "–ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏ - —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞"
    },
    {
      "rule_id": "christmas_orthodox",
      "date": "01-07",
      "is_recurring": true,
      "prepayment_percentage": 100,
      "name": "–†–æ–∂–¥–µ—Å—Ç–≤–æ –•—Ä–∏—Å—Ç–æ–≤–æ (–ø—Ä–∞–≤–æ—Å–ª–∞–≤–Ω–æ–µ)",
      "is_active": true,
      "description": "–ü—Ä–∞–≤–æ—Å–ª–∞–≤–Ω–æ–µ –†–æ–∂–¥–µ—Å—Ç–≤–æ - —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞"
    },
    {
      "rule_id": "valentines_day",
      "date": "02-14",
      "is_recurring": true,
      "prepayment_percentage": 100,
      "name": "–î–µ–Ω—å –≤—Å–µ—Ö –≤–ª—é–±–ª–µ–Ω–Ω—ã—Ö",
      "is_active": true,
      "description": "–î–µ–Ω—å —Å–≤—è—Ç–æ–≥–æ –í–∞–ª–µ–Ω—Ç–∏–Ω–∞ - —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞"
    },
    {
      "rule_id": "defenders_day",
      "date": "02-23",
      "is_recurring": true,
      "prepayment_percentage": 100,
      "name": "–î–µ–Ω—å –∑–∞—â–∏—Ç–Ω–∏–∫–æ–≤ –û—Ç–µ—á–µ—Å—Ç–≤–∞",
      "is_active": true,
      "description": "23 —Ñ–µ–≤—Ä–∞–ª—è - —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞"
    },
    {
      "rule_id": "womens_day",
      "date": "03-08",
      "is_recurring": true,
      "prepayment_percentage": 100,
      "name": "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –∂–µ–Ω—Å–∫–∏–π –¥–µ–Ω—å",
      "is_active": true,
      "description": "8 –º–∞—Ä—Ç–∞ - —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞"
    },
    {
      "rule_id": "radonitsa_2026",
      "date": "2026-04-21",
      "is_recurring": false,
      "prepayment_percentage": 100,
      "name": "–†–∞–¥—É–Ω–∏—Ü–∞",
      "is_active": true,
      "description": "–†–∞–¥—É–Ω–∏—Ü–∞ 2026 –≥–æ–¥–∞ - —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞"
    },
    {
      "rule_id": "labor_day",
      "date": "05-01",
      "is_recurring": true,
      "prepayment_percentage": 100,
      "name": "–ü—Ä–∞–∑–¥–Ω–∏–∫ —Ç—Ä—É–¥–∞",
      "is_active": true,
      "description": "1 –º–∞—è - —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞"
    },
    {
      "rule_id": "victory_day",
      "date": "05-09",
      "is_recurring": true,
      "prepayment_percentage": 100,
      "name": "–î–µ–Ω—å –ü–æ–±–µ–¥—ã",
      "is_active": true,
      "description": "–î–µ–Ω—å –ü–æ–±–µ–¥—ã - —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞"
    },
    {
      "rule_id": "independence_day_belarus",
      "date": "07-03",
      "is_recurring": true,
      "prepayment_percentage": 100,
      "name": "–î–µ–Ω—å –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –†–µ—Å–ø—É–±–ª–∏–∫–∏ –ë–µ–ª–∞—Ä—É—Å—å",
      "is_active": true,
      "description": "3 –∏—é–ª—è - —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞"
    },
    {
      "rule_id": "october_revolution",
      "date": "11-07",
      "is_recurring": true,
      "prepayment_percentage": 100,
      "name": "–î–µ–Ω—å –û–∫—Ç—è–±—Ä—å—Å–∫–æ–π —Ä–µ–≤–æ–ª—é—Ü–∏–∏",
      "is_active": true,
      "description": "7 –Ω–æ—è–±—Ä—è - —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞"
    },
    {
      "rule_id": "christmas_catholic",
      "date": "12-25",
      "is_recurring": true,
      "prepayment_percentage": 100,
      "name": "–†–æ–∂–¥–µ—Å—Ç–≤–æ –•—Ä–∏—Å—Ç–æ–≤–æ (–∫–∞—Ç–æ–ª–∏—á–µ—Å–∫–æ–µ)",
      "is_active": true,
      "description": "–ö–∞—Ç–æ–ª–∏—á–µ—Å–∫–æ–µ –†–æ–∂–¥–µ—Å—Ç–≤–æ - —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞"
    }
  ]
}
```

---

**–ö–û–ù–ï–¶ PRP**

**–°–æ–∑–¥–∞–Ω–æ**: 2026-01-31
**–í–µ—Ä—Å–∏—è**: 1.0
**–ü—Ä–æ–µ–∫—Ç**: The Secret House Booking Bot
**–ê–≤—Ç–æ—Ä**: Claude Code AI Agent
