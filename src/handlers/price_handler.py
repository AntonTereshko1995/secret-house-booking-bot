import sys
import os

from src.services.navigation_service import safe_edit_message_text
sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), "..")))
from src.services.logger_service import LoggerService
from telegram import (InlineKeyboardButton, InlineKeyboardMarkup, Update)
from telegram.ext import (ContextTypes, CallbackQueryHandler, CallbackContext)
from src.handlers import menu_handler
from src.constants import END, MENU, PRICE

def get_handler():
    return [
        CallbackQueryHandler(back_navigation, pattern=f"^{END}$")
    ]

async def back_navigation(update: Update, context: ContextTypes.DEFAULT_TYPE):
    LoggerService.info(__name__, f"Back to menu", update)
    await menu_handler.show_menu(update, context)
    return MENU

async def send_prices(update: Update, context: CallbackContext):
    LoggerService.info(__name__, f"send prices", update)
    tariffs = (
        "üè° <b>–¢–ê–†–ò–§ '–°–£–¢–û–ß–ù–´–ô –û–¢ 3 –ß–ï–õ–û–í–ï–ö'</b>\n"
        "‚úî <b>1 –¥–µ–Ω—å</b> ‚Äî 700 BYN\n"
        "‚úî <b>2 –¥–Ω—è</b> ‚Äî 1300 BYN\n"
        "‚úî <b>3 –¥–Ω—è</b> ‚Äî 1800 BYN\n"
        "<b>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:</b>\n"
        "‚ûï <b>–°–∞—É–Ω–∞</b> ‚Äî 100 BYN\n"
        "‚ûï <b>–§–æ—Ç–æ—Å–µ—Å—Å–∏—è</b> ‚Äî 100 BYN\n"
        "‚ûï –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π 1 —á–∞—Å ‚Äî 30 BYN\n"
        "<b>–£—Å–ª–æ–≤–∏—è:</b>\n"
        "üîπ –î–æ—Å—Ç—É–ø –∫ <b>–°–µ–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–º–Ω–∞—Ç–µ</b>\n"
        "üîπ –î–æ—Å—Ç—É–ø –∫ <b>–¥–≤—É–º —Å–ø–∞–ª—å–Ω—è–º</b>\n"
        "üîπ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π ‚Äî <b>6 —á–µ–ª–æ–≤–µ–∫</b>\n"
        "üîπ –°–≤–æ–±–æ–¥–Ω—ã–π <b>–≤—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–µ–∑–¥–∞</b>\n"
        "üéÅ <b>–ë–æ–Ω—É—Å:\n"
        "</b> –ü—Ä–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –æ—Ç 2 –¥–Ω–µ–π ‚Äî –¥–∞—Ä–∏–º 12 —á–∞—Å–æ–≤ –≤ –ø–æ–¥–∞—Ä–æ–∫ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏!\n\n\n"

        "üè° <b>–¢–ê–†–ò–§ '–°–£–¢–û–ß–ù–´–ô –î–õ–Ø –ü–ê–†'</b>\n"
        "‚úî <b>1 –¥–µ–Ω—å</b> ‚Äî 500 BYN\n"
        "‚úî <b>2 –¥–Ω—è</b> ‚Äî 900 BYN\n"
        "‚úî <b>3 –¥–Ω—è</b> ‚Äî 1200 BYN\n"
        "<b>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:</b>\n"
        "‚ûï <b>–°–∞—É–Ω–∞</b> ‚Äî 100 BYN\n"
        "‚ûï <b>–§–æ—Ç–æ—Å–µ—Å—Å–∏—è</b> ‚Äî 100 BYN\n"
        "‚ûï –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π 1 —á–∞—Å ‚Äî 30 BYN\n"
        "<b>–£—Å–ª–æ–≤–∏—è:</b>\n"
        "üîπ –î–æ—Å—Ç—É–ø –∫ <b>–°–µ–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–º–Ω–∞—Ç–µ</b>\n"
        "üîπ –î–æ—Å—Ç—É–ø –∫ <b>–¥–≤—É–º —Å–ø–∞–ª—å–Ω—è–º</b>\n"
        "üîπ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π ‚Äî <b>2 —á–µ–ª–æ–≤–µ–∫–∞</b>\n"
        "üîπ –°–≤–æ–±–æ–¥–Ω—ã–π <b>–≤—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–µ–∑–¥–∞</b>\n"
        "üéÅ <b>–ë–æ–Ω—É—Å:\n"
        "</b> –ü—Ä–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –æ—Ç 2 –¥–Ω–µ–π ‚Äî –¥–∞—Ä–∏–º 12 —á–∞—Å–æ–≤ –≤ –ø–æ–¥–∞—Ä–æ–∫ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏!\n\n\n"

        "‚è≥ <b>–¢–ê–†–ò–§ '12 –ß–ê–°–û–í'</b>\n"
        "‚úî <b>–û–¥–Ω–∞ —Å–ø–∞–ª—å–Ω—è</b> ‚Äî 250 BYN\n"
        "<b>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:</b>\n"
        "‚ûï <b>–í—Ç–æ—Ä–∞—è —Å–ø–∞–ª—å–Ω—è</b> ‚Äî 70 BYN\n"
        "‚ûï <b>–°–µ–∫—Ä–µ—Ç–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞</b> ‚Äî 70 BYN\n"
        "‚ûï <b>–°–∞—É–Ω–∞</b> ‚Äî 100 BYN\n"
        "‚ûï –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π 1 —á–∞—Å ‚Äî 30 BYN\n"
        "<b>–£—Å–ª–æ–≤–∏—è:</b>\n"
         "üîπ –í–∫–ª—é—á–∞–µ—Ç <b>–æ–¥–Ω—É —Å–ø–∞–ª—å–Ω—é –Ω–∞ –≤—ã–±–æ—Ä</b>\n"
        "üîπ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π ‚Äî <b>2 —á–µ–ª–æ–≤–µ–∫–∞</b>\n"
        "üîπ –°–≤–æ–±–æ–¥–Ω—ã–π <b>–≤—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–µ–∑–¥–∞</b>\n\n\n"


        "üíº <b>–¢–ê–†–ò–§ '–†–ê–ë–û–ß–ò–ô' (—Å –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞ –ø–æ —á–µ—Ç–≤–µ—Ä–≥)</b>\n"
        "‚úî <b>–û–¥–Ω–∞ —Å–ø–∞–ª—å–Ω—è</b> ‚Äî 180 BYN\n"
        "<b>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:</b>\n"
        "‚ûï –í—Ç–æ—Ä–∞—è —Å–ø–∞–ª—å–Ω—è ‚Äî 50 BYN\n"
        "‚ûï <b>–°–µ–∫—Ä–µ—Ç–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞</b> ‚Äî 50 BYN\n"
        "‚ûï <b>–°–∞—É–Ω–∞</b> ‚Äî 100 BYN\n"
        "‚ûï –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π 1 —á–∞—Å ‚Äî 30 BYN\n"
        "<b>–£—Å–ª–æ–≤–∏—è:</b>\n"
         "üîπ –í–∫–ª—é—á–∞–µ—Ç <b>–æ–¥–Ω—É —Å–ø–∞–ª—å–Ω—é –Ω–∞ –≤—ã–±–æ—Ä</b>\n"
        "üîπ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π ‚Äî <b>2 —á–µ–ª–æ–≤–µ–∫–∞</b>\n"
        "üîπ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ <b>–≤ –¥–≤—É—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ–º–µ–∂—É—Ç–∫–∞—Ö:</b>\n"
        "üìå <b>—Å 11:00 –¥–æ 20:00</b>\n"
        "üåô <b>—Å 22:00 –¥–æ 09:00</b>\n\n\n"

        "üî• <b>–¢–ê–†–ò–§ '–ò–ù–ö–û–ì–ù–ò–¢–û'</b>\n"
        "‚úî <b>–°—É—Ç–∫–∏</b> ‚Äî 900 BYN\n"
        "‚úî <b>12 —á–∞—Å–æ–≤</b> ‚Äî 600 BYN\n"
        "üîπ –í–∫–ª—é—á–∞–µ—Ç <b>–≤–µ—Å—å –¥–æ–º</b>, <b>–≤—Å–µ –∫–æ–º–Ω–∞—Ç—ã</b>, <b>—Å–µ–∫—Ä–µ—Ç–Ω—É—é –∫–æ–º–Ω–∞—Ç—É</b> –∏ <b>—Å–∞—É–Ω—É</b>\n"
        "üîπ <b>–ë–µ–∑ –∑–∞–∫–ª—é—á–µ–Ω–∏—è –¥–æ–≥–æ–≤–æ—Ä–∞</b>\n"
        "üîπ <b>–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö –∫–∞–º–µ—Ä –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –ø–æ –ø–µ—Ä–∏–º–µ—Ç—Ä—É –¥–æ–º–∞</b>\n"
        "üéÅ <b>–ü–æ–¥–∞—Ä–∫–∏:</b>\n"
        "üöò <b>–¢—Ä–∞–Ω—Å—Ñ–µ—Ä</b> –æ—Ç/–¥–æ –¥–æ–º–∞ –Ω–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ –±–∏–∑–Ω–µ—Å-–∫–ª–∞—Å—Å–∞\n"
        "üç∑ <b>–ë—É—Ç—ã–ª–∫–∞ –≤–∏–Ω–∞ –∏ –ª—ë–≥–∫–∏–µ –∑–∞–∫—É—Å–∫–∏</b>\n"
        "üì∏ <b>–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è —Ñ–æ—Ç–æ—Å–µ—Å—Å–∏—è</b> –ø—Ä–∏ –∞—Ä–µ–Ω–¥–µ –Ω–∞ —Å—É—Ç–∫–∏ (2 —á–∞—Å–∞, –±—Ä–æ–Ω—å –∑–∞ –Ω–µ–¥–µ–ª—é)\n")
    
    keyboard = [[InlineKeyboardButton("–û—Ç–º–µ–Ω–∞", callback_data=END)]]
    reply_markup = InlineKeyboardMarkup(keyboard)
    await update.callback_query.answer()
    await safe_edit_message_text(
            callback_query=update.callback_query,
            text=tariffs,
            reply_markup=reply_markup)
    return PRICE